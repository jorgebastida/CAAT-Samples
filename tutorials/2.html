<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Tutorial 3 - Animable elements</title>

<script type="text/javascript" src="sh/shCore.js"></script>
<script type="text/javascript" src="sh/shBrushJScript.js"></script>
<link href="sh/shCore.css" rel="stylesheet" type="text/css" />
<link href="sh/shThemeDefault.css" rel="stylesheet" type="text/css" />    

<script type="text/javascript" src="../../build/caat.js"></script>

<script type="text/javascript">
     SyntaxHighlighter.all()
</script>
    
<style>
    div.code {
       font-size: .7em;
    }
    div.APIENTRY {
        background-color: #f0f0f0;
    }
</style>

</head>


<body style="color:black; background:#ffffff;">




<div class="section">
    <h1>CAAT.SpriteActor</h1>
    <p>CAAT has support for simple Sprite classes. The Sprite contains an instance of CAAT.CompoundImage
    which will be treated as an array of rows by columns subimages.</p>
    <p>We'll be using the following image for the sprite example: <img src="res/img/anim1.png">.</p>
    <p>Every SpriteActor must define the following attributes:</p>
    <ul>
        <li>animation image index. It means what subimages sequence to animate the sprite with.
		<li>sprite image. A CAAT.CompoundImage instance. This object will manage the sample image as
        an array of subimages.
		<li>change time. Every how much Scene time the Sprite should change the image from the Animation index.
        <li>transformation (optional). How to show the image. It can be mirrored horizontal and vertically.
    </ul>
    <p>A CAAT.SpriteActor does not need to set its dimension since it will derive it from the suplied
    sprite image. Alpha transparency applies as well to Sprites.</p>
    <p>Here it is an example where the four SpriteActor instances have each a different Sprite transformation.</p>
    <p>For this example we need some images that's why i'm using the CAAT.ImagePreloader helper. This
    object reads resources and stores them into a known structure. More about it on the Extras chapter.</p>
    <div class="code">
        <pre class="brush: js; auto-links: false; toolbar: false;">

                var _director_6= new CAAT.Director().initialize(
                        400,
                        150,
                        document.getElementById('_c6') );

                var _scene_6= _director_6.createScene();

                // define a resource preloader.
                new CAAT.ImagePreloader().loadImages(
                    [ {id:'fish',     url:'res/img/anim1.png'} ],   // get only this image.
                    function( counter, images ) {
                        if ( counter==images.length ) {             // when it is done loading

                            // save loaded resources on Director.
                            _director_6.imagesCache= images;

                            // CompoundImage, basically treates a single image as an Array
                            // of equals sized subimages. We want in this case, one row, 3 columns.
                            var cimage = new CAAT.SpriteImage().
                                    initialize( _director_6.getImage('fish'), 1, 3);

                            // create 4 fish positioned in a 2x2 array.
                            // set sprite transformation to show how fish is transformed..
                            for(var i=0; i<4; i++ ) {
                                var fish = new CAAT.Actor().
                                        setAnimationImageIndex( [0,1,2,1] ).
                                        setBackgroundImage(cimage.getRef()).
                                        setChangeFPS(350).
                                        setLocation(20+(i%2)*(15+cimage.singleWidth), 20+(15+cimage.singleWidth)*(i>1)).
                                        setSpriteTransformation(i);
                                _scene_6.addChild(fish);
                            }

                            // Sprite objects are Actors, and hence can contain behaviors.
                            var fish_scaling = new CAAT.Actor().
                                    setAnimationImageIndex( [0,1,2,1] ).
                                    setBackgroundImage(cimage.getRef()).
                                    setChangeFPS(500).
                                    setLocation(200,70).
                                    setAlpha(.8);

                            var rb_6= new CAAT.RotateBehavior().
                                    setAngles(0, 2*Math.PI).
                                    setFrameTime( 0, 20000 ).
                                    setCycle(true);

                            var cb_6= new CAAT.ContainerBehavior().
                                    setFrameTime(0,2000).
                                    setCycle(true);
                                var sb_6_x= new CAAT.ScaleBehavior().
                                        setValues( 2, 4, 2, 2 ).
                                        setFrameTime( 0, 1000 ).
                                        setPingPong();
                                var sb_6_y= new CAAT.ScaleBehavior().
                                        setValues( 2, 2, 2, 4 ).
                                        setFrameTime( 1000, 1000 ).
                                        setPingPong();
                            cb_6.addBehavior( sb_6_x );
                            cb_6.addBehavior( sb_6_y );

                            fish_scaling.addBehavior( rb_6 );
                            fish_scaling.addBehavior( cb_6 );

                            _scene_6.addChild(fish_scaling);
                        }
                    });

                CAAT.loop(20);

        </pre>
    </div>
        <div>
            <canvas id="_c6"></canvas></div>
            <script>
                (function() {

                    var _director_6= new CAAT.Director().initialize(
                            400,
                            150,
                            document.getElementById('_c6') );

                    var _scene_6= _director_6.createScene();

                    // define a resource preloader.
                    new CAAT.ImagePreloader().loadImages(
                        [ {id:'fish',     url:'res/img/anim1.png'} ],   // get only this image.
                        function( counter, images ) {
                            if ( counter==images.length ) {             // when it is done loading

                                // save loaded resources on Director.
                                _director_6.setImagesCache(images);
                                // CompoundImage, basically treates a single image as an Array
                                // of equals sized subimages. We want in this case, one row, 3 columns.
                                var cimage = new CAAT.SpriteImage().
                                        initialize( _director_6.getImage('fish'), 1, 3);

                                // create 4 fish positioned in a 2x2 array.
                                // set sprite transformation to show how fish is transformed..
                                for(var i=0; i<4; i++ ) {
                                    var fish = new CAAT.SpriteActor().
                                            setAnimationImageIndex( [0,1,2,1] ).
                                            setSpriteImage(
                                                new CAAT.CompoundImage().
                                                    initialize( _director_6.getImage('fish'), 1, 3)
                                            ).
                                            setChangeFPS(350).
                                            setLocation(20+(i%2)*(15+cimage.singleWidth), 20+(15+cimage.singleWidth)*(i>1)).
                                            setSpriteTransformation(i);
                                    _scene_6.addChild(fish);
                                }

                                // Sprite objects are Actors, and hence can contain behaviors.
                                var fish_scaling = new CAAT.Actor().
                                        setAnimationImageIndex( [0,1,2,1] ).
                                        setBackgroundImage(cimage.getRef()).
                                        setChangeFPS(500).
                                        setLocation(200,70).
                                        setAlpha(.8);

                                var rb_6= new CAAT.RotateBehavior().
                                        setValues(0, 2*Math.PI).
                                        setFrameTime( 0, 20000 ).
                                        setCycle(true);

                                var cb_6= new CAAT.ContainerBehavior().
                                        setFrameTime(0,2000).
                                        setCycle(true);
                                    var sb_6_x= new CAAT.ScaleBehavior().
                                            setValues( 2, 4, 2, 2 ).
                                            setFrameTime( 0, 1000 ).
                                            setPingPong();
                                    var sb_6_y= new CAAT.ScaleBehavior().
                                            setValues( 2, 2, 2, 4 ).
                                            setFrameTime( 1000, 1000 ).
                                            setPingPong();
                                cb_6.addBehavior( sb_6_x );
                                cb_6.addBehavior( sb_6_y );

                                fish_scaling.addBehavior( rb_6 );
                                fish_scaling.addBehavior( cb_6 );

                                _scene_6.addChild(fish_scaling);
                            }
                        });

                    CAAT.loop(20);

                })();
            </script>
        </div>


<div class="section">
    <h1>CAAT.TextActor</h1>
    <p>CAAT can show text by exposing the TextActor class.</p>
    <p>A text is defined, as in a Canvas rendering context, by the font, text alignment and text base line. As any
    CAAT Actor, the developer can define any valid Canvas rendering context fillStyle, like colors, gradients,
    other Canvas objects, or a Video object in example, and any valid stroke style</p>
    <p><b>In CAAT, neither textAlign nor textBaseline should be used.</b></p>
    <p>A TextActor can be modified by the following methods:</p>
    <div class="APIENTRY">
        <p><b>function setOutline( boolean )</b></p>
        <p>Makes the text to be outlined or not.</p>
    </div>
    <div class="APIENTRY">
        <p><b>function setOutlineColor( color )</b></p>
        <p>Sets outline color.</p>
    </div>
    <div class="APIENTRY">
        <p><b>function setFill( boolean )</b></p>
        <p>Makes the text to be filled or not.</p>
    </div>
    <div class="APIENTRY">
        <p><b>function setPath( path, interpolator, time )</b></p>
        <p>Makes the text to travel around a path.</p>
        <p>Interpolator can be undefined, leading to a default LinearInterpolator.</p>
        <p>Time can be undefined, leading to a default ten seconds to traverse.</p>
    </div>


    <p>As any other actor, a TextActor will be modified by behaviors.</p>
    <div class="code">
        <pre class="brush: js; auto-links: false; toolbar: false;">
                var _director_7= new CAAT.Director().initialize(
                        700,
                        200,
                        document.getElementById('_c7')
                        );

                var _scene_7= _director_7.createScene();

                // create a vertical gradient to apply to text.
                var gradient_top= _director_7.ctx.createLinearGradient(0,0,0,40);
                gradient_top.addColorStop(0,'#ffff00');
                gradient_top.addColorStop(0.5,'#00ffff');
                gradient_top.addColorStop(1,'blue');

                // outline text. no fillStyle since the text will just be outlined.
                var _text_00= new CAAT.TextActor().
                        setFont("40px sans-serif").
                        setText("CAAT").
                        setBaseline("top").
                        setFill(false).
                        setLocation( 0, 30 ).
                        calcTextSize(_director_7).
                        cacheAsBitmap();

                // gradient text.
                var _text_01= new CAAT.TextActor().
                        setFont("40px sans-serif").
                        setText("CAAT").
                        setFillStyle(gradient_top).
                        setBaseline("top").
                        setLocation( 0, 80 ).
                        calcTextSize(_director_7).
                        cacheAsBitmap();

                // gradient + outlined.
                var _text_02= new CAAT.TextActor().
                        setFont("40px sans-serif").
                        setText("CAAT").
                        setFillStyle(gradient_top).
                        setBaseline("top").
                        setOutline(true).
                        setOutlineColor('blue').
                        setLocation( 0, 130 ).
                        calcTextSize(_director_7).
                        cacheAsBitmap();

                _scene_7.addChild(_text_00);
                _scene_7.addChild(_text_01);
                _scene_7.addChild(_text_02);

                // a simple TextActor
                var _text_10= new CAAT.TextActor().
                        setFont("40px sans-serif").
                        setText("CAAT").
                        setFillStyle(gradient_top).
                        setBaseline("top").
                        setOutline(true).
                        setOutlineColor('yellow').
                        setLocation( 200,80 ).
                        calcTextSize(_director_7).
                        cacheAsBitmap();

                // rotate in 3 seconds
                var _text_00_rb= new CAAT.RotateBehavior().
                        setAngles(0, 2*Math.PI).
                        setFrameTime( 0, 3000 ).
                        setCycle(true);

                // scale in 6 seconds doing pingpong
                var _text_00_sb= new CAAT.ScaleBehavior().
                        setValues( .5, 2, .5, 2 ).
                        setFrameTime( 0, 6000 ).
                        setCycle(true).
                        setPingPong();

                _text_10.addBehavior( _text_00_rb );
                _text_10.addBehavior( _text_00_sb );
                _scene_7.addChild( _text_10 );


                // create a circular path.
                var _path_c7= new CAAT.Path().
                    beginPath(425,100).
                    addCubicTo( 425,0,   625,0,   625,100 ).
                    addCubicTo( 625,200,  425,200,  425,100 ).
                    endPath();

                // set an actor to be able to handle path.
                var _pathactor_c7= new CAAT.PathActor().
                        setBounds(0,0,_director_7.width,_director_7.height).
                        setPath(_path_c7);
                _scene_7.addChild( _pathactor_c7 );

                // make text traverse over the path
                var _text_20= new CAAT.TextActor().
                        setFont("30px sans-serif").
                        setText("CAAT").
                        setFillStyle('green').
                        setBaseline("bottom").      // over the path
                        setOutline(true).
                        setOutlineColor('red').
                        calcTextSize(_director_7).
                        setPath(_path_c7);          // traverse the path with defaults.
                _scene_7.addChild( _text_20 );

                // make text traverse under the path
                var _text_21= new CAAT.TextActor().
                        setFont("40px sans-serif").
                        setText("CAAT").
                        setFillStyle(gradient_top).
                        setBaseline("top").         // under path
                        setOutline(true).
                        setOutlineColor('red').
                        calcTextSize(_director_7).
                        setPath( _path_c7,
                                 new CAAT.Interpolator().createBounceInOutInterpolator(1.1, .4),
                                 20000 );
                _scene_7.addChild( _text_21 );

                CAAT.loop(20);
        </pre>
    </div>
    <div>
        <canvas id="_c7"></canvas></div>
        <script>
            (function() {

                var _director_7= new CAAT.Director().initialize(
                        700,
                        200,
                        document.getElementById('_c7')
                        );

                var _scene_7= _director_7.createScene();

                // create a vertical gradient to apply to text.
                var gradient_top= _director_7.ctx.createLinearGradient(0,0,0,40);
                gradient_top.addColorStop(0,'#ffff00');
                gradient_top.addColorStop(0.5,'#00ffff');
                gradient_top.addColorStop(1,'blue');

                // outline text. no fillStyle since the text will just be outlined.
                var _text_00= new CAAT.TextActor().
                        setFont("40px sans-serif").
                        setText("CAAT").
                        setBaseline("top").
                        setFill(false).
                        setLocation( 0, 30 ).
                        calcTextSize(_director_7).
                        cacheAsBitmap();

                // gradient text.
                var _text_01= new CAAT.TextActor().
                        setFont("40px sans-serif").
                        setText("CAAT").
                        setFillStyle(gradient_top).
                        setBaseline("top").
                        setLocation( 0, 80 ).
                        calcTextSize(_director_7).
                        cacheAsBitmap();

                // gradient + outlined.
                var _text_02= new CAAT.TextActor().
                        setFont("40px sans-serif").
                        setText("CAAT").
                        setFillStyle(gradient_top).
                        setBaseline("top").
                        setOutline(true).
                        setOutlineColor('blue').
                        setLocation( 0, 130 ).
                        calcTextSize(_director_7).
                        cacheAsBitmap();

                _scene_7.addChild(_text_00);
                _scene_7.addChild(_text_01);
                _scene_7.addChild(_text_02);

                // a simple TextActor
                var _text_10= new CAAT.TextActor().
                        setFont("40px sans-serif").
                        setText("CAAT").
                        setFillStyle(gradient_top).
                        setBaseline("top").
                        setOutline(true).
                        setOutlineColor('yellow').
                        setLocation( 200,80 ).
                        calcTextSize(_director_7).
                        cacheAsBitmap();

                // rotate in 3 seconds
                var _text_00_rb= new CAAT.RotateBehavior().
                        setAngles(0, 2*Math.PI).
                        setFrameTime( 0, 3000 ).
                        setCycle(true);

                // scale in 6 seconds doing pingpong
                var _text_00_sb= new CAAT.ScaleBehavior().
                        setValues( .5, 2, .5, 2 ).
                        setFrameTime( 0, 6000 ).
                        setCycle(true).
                        setPingPong();

                _text_10.addBehavior( _text_00_rb );
                _text_10.addBehavior( _text_00_sb );
                _scene_7.addChild( _text_10 );


                // create a circular path.
                var _path_c7= new CAAT.Path().
                    beginPath(425,100).
                    addCubicTo( 425,0,   625,0,   625,100 ).
                    addCubicTo( 625,200,  425,200,  425,100 ).
                    endPath();

                // set an actor to be able to handle path.
                var _pathactor_c7= new CAAT.PathActor().
                        setBounds(0,0,_director_7.width,_director_7.height).
                        setPath(_path_c7);
                _scene_7.addChild( _pathactor_c7 );

                // make text traverse over the path
                var _text_20= new CAAT.TextActor().
                        setFont("30px sans-serif").
                        setText("CAAT").
                        setFillStyle('green').
                        setBaseline("bottom").      // over the path
                        setOutline(true).
                        setOutlineColor('red').
                        calcTextSize(_director_7).
                        setPath(_path_c7);          // traverse the path with defaults.
                _scene_7.addChild( _text_20 );

                // make text traverse under the path
                var _text_21= new CAAT.TextActor().
                        setFont("40px sans-serif").
                        setText("CAAT").
                        setFillStyle(gradient_top).
                        setBaseline("top").         // under path
                        setOutline(true).
                        setOutlineColor('red').
                        calcTextSize(_director_7).
                        setPath( _path_c7,
                                 new CAAT.Interpolator().createBounceInOutInterpolator(1.1, .4),
                                 20000 );
                _scene_7.addChild( _text_21 );

                CAAT.loop(20);
            })();
        </script>
    </div>



<div class="section">
    <h1>CAAT.ShapeActor</h1>
    <p>
        CAAT also allows for simple shapes to be drawn as Scene Actors. The class ShapeActor will do.
        By now, only two shapes are supported but more will be added soon. These shapes are: Rectangle and
        Circle.
    </p>
    <div class="APIENTRY">
        <p><b>function setShape( shape_id )</b></p>
        <p>Sets the Shape the actor will show. Currently only SHAPE_RECTANGLE and SHAPE_CIRCLE are available.</p>
    </div>
    <div class="APIENTRY">
        <p><b>function setCompositeOp( compositeOp )</b></p>
        <p>Sets the composite operation to apply when drawing the Shape. It must be any valid canvas rendering
            context compositeOp value.</p>
    </div>
    <div>
        <p>
            An now, for a more advanced example than just draw shapes on screen.
        </p>
        <p>
            Move the mouse over the black area to see some red Circle-Shaped actors. Hold control to
            add some blue Rectangle-Shaped actors. Upon behavior expiration (ie, elements en moving and
            fading), the correspondent Actor is marked as expired and discardable, so it will be removed
            from Scene.
        </p>
    </div>
    <div class="code">
        <pre class="brush: js; auto-links: false; toolbar: false;">

                var _director_8= new CAAT.Director().initialize(
                        400,
                        200,
                        document.getElementById('_c8'));

                var _scene_8= _director_8.createScene();

                // create a container, equals in size to the director.
                var root= new CAAT.ActorContainer().
                    create().
                    setBounds(0,0,
                         _director_8.width,_director_8.height).
                    setFillStyle('#000000');

                _scene_8.addChild( root );

                // on mouse move over the root Actor
                root.mouseMove= function(mouseEvent) {

                    var r= 1+10*Math.random();

                    var bubble;

                    // is pressing control, add a Rectangle-Shaped blue Actor
                    if ( mouseEvent.isControlDown() ) {
                        bubble= new CAAT.ShapeActor().
                            setLocation( mouseEvent.point.x, mouseEvent.point.y ).
                            setSize( 5+r, 5+r ).
                            setShape( CAAT.ShapeActor.prototype.SHAPE_RECTANGLE ).
                            enableEvents(false).
                            setCompositeOp('lighter').
                            setFillStyle('blue');

                    } else {
                    // else, add a Circle-Shaped red Actor
                        bubble= new CAAT.ShapeActor().
                            setLocation( mouseEvent.point.x, mouseEvent.point.y ).
                            setSize( 5+r, 5+r ).
                            enableEvents(false).
                            setCompositeOp('lighter').
                            setFillStyle('red');
                    }

                    root.addChild(bubble);

                    // Add a container behavior, to hold a fading behavior and a moving
                    // behavior.
                    var cb= new CAAT.ContainerBehavior().
                        setFrameTime( _scene_8.time+2000+1000*Math.random(), 500 ).
                        addListener(
                            // when the container behavior is expired, expire and discard
                            // the actor.
                            {
                                behaviorExpired : function(behaviour, time, actor) {
                                    actor.
                                        setDiscardable(true).
                                        setExpired(true);
                                }
                            });

                    var ab= new CAAT.AlphaBehavior().
                        setFrameTime( 0, 500 ).
                        setValues( 1, 0 );

                    cb.addBehavior(ab);

                    var tb= new CAAT.PathBehavior().
                        setFrameTime( 0, 500 ).
                        setPath(
                            new CAAT.Path().setLinear(
                                    bubble.x, bubble.y,
                                    bubble.x, bubble.y-100-100*Math.random() ) );
                    cb.addBehavior(tb);

                    bubble.addBehavior( cb );
                }

                var span= document.getElementById('_c8_data');

                // hook on endAnimate to show on document how many Actors are alive.
                _scene_8.endAnimate= function _endAnimate(director,time) {
                    // chain to previous method. DON'T FORGET TO DO THIS!!!.
                    CAAT.Scene.superclass.endAnimate.call(this,director,time);
                    if (span!=null) {
                        span.innerText= 'Actors: '+root.childrenList.length;
                    }
                }

                CAAT.loop(20);

        </pre>
    </div>
    <div>
        <canvas id="_c8"></canvas></div>
        <div><span id="_c8_data"></span></div>
        <script>
            (function() {

                var _director_8= new CAAT.Director().initialize(
                        400,
                        200,
                        document.getElementById('_c8'));

                var _scene_8= _director_8.createScene();

                // create a container, equals in size to the director.
                var root= new CAAT.ActorContainer().
                    create().
                    setBounds(0,0,
                         _director_8.canvas.width,_director_8.canvas.height).
                    setFillStyle('#000000');
                root.mouseEnter= function(mouseEvent) {};
                root.mouseExit= function(mouseEvent) {};

                _scene_8.addChild( root );

                // on mouse move over the root Actor
                root.mouseMove= function(mouseEvent) {

                    var r= 1+10*Math.random();

                    var bubble;

                    // is pressing control, add a Rectangle-Shaped blue Actor
                    if ( mouseEvent.isControlDown() ) {
                        bubble= new CAAT.ShapeActor().
                            create().
                            setLocation( mouseEvent.point.x, mouseEvent.point.y ).
                            setSize( 5+r, 5+r ).
                            setShape( CAAT.ShapeActor.prototype.SHAPE_RECTANGLE ).
                            enableEvents(false).
                            setCompositeOp('lighter').
                            setFillStyle('blue');

                    } else {
                    // else, add a Circle-Shaped red Actor
                        bubble= new CAAT.ShapeActor().
                            setLocation( mouseEvent.point.x, mouseEvent.point.y ).
                            create().
                            setSize( 5+r, 5+r ).
                            enableEvents(false).
                            setCompositeOp('lighter').
                            setFillStyle('red');
                    }

                    root.addChild(bubble);

                    span.innerText= 'Actors: '+root.childrenList.length;

                    // Add a container behavior, to hold a fading behavior and a moving
                    // behavior.
                    var cb= new CAAT.ContainerBehavior().
                        setFrameTime( _scene_8.time+2000+1000*Math.random(), 500 ).
                        addListener(
                            // when the container behavior is expired, expire and discard
                            // the actor.
                            {
                                behaviorExpired : function(behaviour, time, actor) {
                                    actor.
                                        setDiscardable(true).
                                        setExpired(true);
                                }
                            });

                    var ab= new CAAT.AlphaBehavior().
                        setFrameTime( 0, 500 ).
                        setValues( 1, 0 );

                    cb.addBehavior(ab);

                    var tb= new CAAT.PathBehavior().
                        setFrameTime( 0, 500 ).
                        setPath(
                            new CAAT.Path().setLinear(
                                    bubble.x, bubble.y,
                                    bubble.x, bubble.y-100-100*Math.random() ) );
                    cb.addBehavior(tb);

                    bubble.addBehavior( cb );
                };

                var span= document.getElementById('_c8_data');

                CAAT.loop(20);
            })();
        </script>
    </div>


<div class="section">
    <h1>Defining custom actors</h1>
    <p>
        The cycle of putting an Actor on screen for every Actor in Scene's frame time is as follows:
    </p>
    <ul>
        <li>A call to the method animate(director, time). This method basically applies any Behavior registered for an
        Actor.</li>
        <li>If after applying the Behaviors an Actor is still in frame time, a call to the method paintActor(director, SceneTime)
        is performed. This method sets an appropriate global alpha, prepares Actor's transformation matrix, clips the
        canvas if set, etc.</li>
        <li>paintActor, then calls the method paint(director,time) which finally executes the painting routine.</li>
    </ul>
    <p>
        This method calls are automatically performed by the framework, starting from the Director and following every
        running Scene on it in a recursive object orientes fashion. CAAT in fact, tries to be object oriented.
        The Director object is in fact a special kind of ActorContainer, so it is the Scene object.
    </p>
    <p>
        To define a new Actor type, the developer first must extend either CAAT.Actor or CAAT.ActorContainer as needed.
        The extension mechanism is straightforward and performed like this:
    </p>
    <div class="code">
        <pre class="brush: js; auto-links: false; toolbar: false;">

                (function() {

                    // constructor
                    CAAT.NewActorType= function() {

                        // must chain to superclass constructor:
                        CAAT.newActorType.superclass.constructor.call(this);

                        // perform other initialization code here.
                        // better do it overriding create method.

                        return this;
                    };

                    // extension
                    extend( CAAT.NewActorType, CAAT.Actor, {
                        // overriden methods/attributes go here.
                    });
                })();

        </pre>
    </div>
    <p>
        has the opportunity to override the methods
    </p>
    <ul>
        <li>animate(director,time) to perform extra transformations or to avoid Behaviors at all. It is convenient to chain
        the call to the previous animate method by issuing a call to</li>
    <div class="code">
        <pre class="brush: js; auto-links: false; toolbar: false;">
            CAAT.NewActorType.superclass.method-to-override.call(
                this,
                overriden-method-parameter-list );
        </pre>
    </div>

        <li>paint(director,time) to perform custom paint.</li>
    </ul>
    <p>
        This is CAAT code to define the ShapeActor
    </p>
    <div class="code">
        <pre class="brush: js; auto-links: false; toolbar: false;">

                (function() {

                    // constructor
                    CAAT.ShapeActor = function() {

                        // chain superclass constructor
                        CAAT.ShapeActor.superclass.constructor.call(this);

                        // extra initialization code
                        this.compositeOp= 'source-over';
                        return this;
                    };

                    // extension
                    extend( CAAT.ShapeActor, CAAT.Actor, {

                        // overriden paint method
                        paint: function(director,time) {
                            var ctx= director.crc;

                            ctx.globalCompositeOperation= this.compositeOp;
                            if ( null!=this.fillStyle ) {
                                ...
                                ctx.arc(
                                        this.width/2,
                                        this.height/2,
                                        Math.min(this.width,this.height)/2,
                                        0,
                                        2*Math.PI,
                                        false );
                                ctx.fill();
                            }
                            ...
                        }
                    };
                })();

        </pre>
    </div>
</div>

</body>
</html>